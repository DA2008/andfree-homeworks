# Домашнее задание к занятию 3. Взаимодействие со сторонними сервисами 
В нашем приложении мы будем использовать сервис Wolfram Alpha, а именно [Short Answer API.](https://products.wolframalpha.com/simple-api/documentation/) Он предоставит нам короткие текстовые ответы на наши текстовые вопросы.
 

## Задание 1
Текст задачи

Пример ввода-вывода программы: 
```
Пример 
```

## Задание 2

## Задание 3

## Инструкция по выполнению домашнего задания

1. Получите доступ к полю вывода ответа внутри метода `askWolfram`.

```kotlin
val answerText = findViewById<TextView>(R.id.answer_output)
```

2. Установите начальный текст ответа.

```kotlin
answerText.text = "Let me think..."
```

3. Помните, что этот запрос нужно выполнить на другом потоке, так как в нем происходит сетевой запрос.

```kotlin
val queryResult = engine.performQuery(query)
```

4. Поэтому он должен находиться внутри:

```kotlin
Thread(Runnable {
    ...
}).start()
```

5. После его выполнения у вас есть результат, queryResult, которые нужно отобразить в интерфейсе.

```kotlin
fun askWolfram(question: String) {
        ...

        val answerText = findViewById<TextView>(R.id.answer_output)
        answerText.text = "Let me think..."

        Thread(Runnable {
            val queryResult = engine.performQuery(query)

            answerText.post {
                ...
            }
        }).start()
    }
```

6. Везде, где вы выводите текст в Log, выведите тот же текст в поле ответа с помощью:

```kotlin
answerText.text = "..."
```

7. В итоге метод выглядит так:

```kotlin
fun askWolfram(question: String) {
        val wolframAppId = "DEMO" // тут можно использовать ваш AppId, тогда можно будет задавать любые вопросы

        val engine = WAEngine()
        engine.appID = wolframAppId
        engine.addFormat("plaintext")

        val query = engine.createQuery()
        query.input = question

        val answerText = findViewById<TextView>(R.id.answer_output)
        answerText.text = "Let me think..."

        Thread(Runnable {
            val queryResult = engine.performQuery(query)

            answerText.post {
                if (queryResult.isError) {
                    Log.e("wolfram error", queryResult.errorMessage)
                    answerText.text = queryResult.errorMessage
                } else if (!queryResult.isSuccess) {
                    Log.e("wolfram error", "Sorry, I don't understand, can you rephrase?")
                    answerText.text = "Sorry, I don't understand, can you rephrase?"
                } else {
                    for (pod in queryResult.pods) {
                        if (!pod.isError) {
                            for (subpod in pod.subpods) {
                                for (element in subpod.contents) {
                                    if (element is WAPlainText) {
                                        Log.d("wolfram", element.text)
                                        answerText.text = element.text
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }).start()
    }
```

Любые вопросы по решению задач задавайте в чате в Telegram.
